<html>
<head>
<meta charset="utf-8"/>
<title>PZP Dashboard</title>
<link href='http://fonts.googleapis.com/css?family=Ovo' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="css/layout.css" type="text/css" media="screen"/>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen"/>
<link rel="stylesheet" href="../css/jquery.mobile-1.3.0.min.css" />
<script src="../js/jquery-1.8.2.min.js"></script>
<script src="../js/jquery.mobile-1.3.0.min.js"></script>
<script type="text/javascript" src="js/hideshow.js"></script>
<script type="text/javascript" src="js/jquery.equalHeight.js"></script>
<script type="text/javascript" src="../webinos.js"></script>
<script type="text/javascript">

    $ (document).ready (function () {
        function setPage (event) {
            $.get (event.data.param2, {}, function (reply) {
                $ ('#main').html('<article class="module width_full"><header><h3>' + event.data.param1 +
                        '</h3></header><div class="module_content">' + reply + '</div></article><div class="spacer"></div>');
            }, "html");
        }

        function logMessage (msg) {
            if (msg) {
                $ ('#message').append ('<li>' + msg + '</li>');
            }
        }

        function error (msg) {
            logMessage(msg.payload.message);
        }
        webinos.session.addListener ('error', error);

        function generateLinks(msg) {
            $ ("#api").html("");
            for (var i =0 ; i < msg.payload.message.length; i = i + 1){
                $('<li> <a href="javascript:;" >'+msg.payload.message[i].name+'</a> </li>')
                    .click({param1:msg.payload.message[i].name, param2: msg.payload.message[i].link}, setPage)
                    .appendTo("#api");
            }
        }
        webinos.session.addListener('gatherTestPageLinks', generateLinks);

        function getLinks(){
            var options = {type: 'prop', payload: {status:'gatherTestPageLinks'}};
            webinos.session.message_send(options);
        }
        webinos.session.addListener ('registeredBrowser', getLinks);

    });
</script>
</head>
<body>
<header id="header">
    <hgroup>
        <h1 class="site_title"><img src="images/webinosWithBorder.png">PZP TestBed</h1>
        <h2 class="section_title">Dashboard</h2>
    </hgroup>
</header>
<!-- end of header bar -->
<section id="secondary_bar">
    <div class="breadcrumbs_container">
        <article class="breadcrumbs"><a href="client.html">Webinos Pzp</a>
        <div class="breadcrumb_divider"></div>
         <a class="current">Dashboard</a></article>
    </div>
</section>
<!-- end of secondary bar -->

<aside id="sidebar" class="column">
    <h3>APIs</h3>
    <ul class="toggle" style=""><li id="api"></li></ul>
    <footer>
        <hr />
        <p><strong>Powered by <a href="http://www.webinos.org">webinos</a></strong></p>
    </footer>
</aside><!-- end of sidebar -->

<section id="main" class="column">
    <article class="module width_full">
        <header><h3>Webinos PZP</h3></header>
        <div class="module_content">
            <p>This is the main test page for you pzp.</p>
            <p><b>Please select one of the actions on the left menu</b></p>
        </div>
        <div id="loader"></div>
    </article><!-- end of styles article -->
    <div class="spacer"></div>
    <div id="status"> STATUS: <span id="message"></span></div>
</section>
</body>
</html>
